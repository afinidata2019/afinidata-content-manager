<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Afinidata - Reporte</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    {%load static%}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.css">
    <link rel="stylesheet" href="{% static 'stylesheets/instances.css' %}">
</head>
<body>
    <div id="main">
        <header>
            <div class="ml-5 mt-2">
                <h5 class="logo">afinidata</h5>
            </div>
        </header>
        <section id="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-3 col-xs-12 my-4">
                        <div class="mx-5">
                            <div class="info-instance">
                                <img src="{% static 'images/instances/child-min.png' %}" alt="Child min" class="img-child">
                                <p class="text-secondary">Nombre</p>
                                <p><strong>{{ instance.name }}</strong></p>
                                <hr>
                                <p class="text-secondary">Edad</p>
                                <p><strong>{{ meses }} mes{% if meses > 1%}es{%endif%}</strong></p>
                            </div>
                            <div class="info-sessions my-5">
                                <div class="row">
                                    <div class="col-8 col-xs-12">
                                        <p class="text-secondary">Sesiones completadas</p>
                                        <p><strong>No. {{ sesiones_completadas }}</strong></p>
                                    </div>
                                    <div class="col-4 col-xs-12">
                                        <img src="{% static 'images/instances/medalla-min.png' %}" alt="Medalla" class="img-medal">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-9 col-xs-12">
                        <div class="mx-5">
                            <div class="resume-section-1">
                                <div class="row">
                                    <div class="col-md-12 mt-3">
                                        <h6><strong>Progreso</strong></h6>
                                        <p>Por área</p>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="resume-section-2 my-5">
                                {% for s in score %}
                                    {% if s.value  > 0 %}
                                        <div class="row my-5">
                                            <div class="col-md-4 col-xs-12 text-center">
                                                <div class="porcentaje-progreso">{{ s.value }}</div>
                                                <span class="text-secondary">{{ s.area.name}}</span>
                                                {% if  s.area_id == 2 %}
                                                    <img src="{% static 'images/instances/icon_3-min.png' %}" width="20" height="20"
                                                    class="ml-4">
                                                {% elif s.area_id == 1 %}
                                                    <img src="{% static 'images/instances/icon_1-min.png' %}" width="20" height="20"
                                                    class="ml-4">
                                                {% elif s.area_id == 43 %}
                                                    <img src="{% static 'images/instances/icon_2-min.png' %}" width="20" height="20"
                                                    class="ml-4">
                                                {% elif s.area_id == 3 %}
                                                    <img src="{% static 'images/instances/icon_3-min.png' %}" width="20" height="20"
                                                    class="ml-4">
                                                {% endif %}
                                            </div>
                                            <div class="col-md-8 col-xs-12" style="padding-top:40px;">
                                                <div class="progress">
                                                    <div class="progress-bar bg-primary" role="progressbar" style="width: {{s.value}}%" aria-valuenow="{{ s.value }}" aria-valuemin="0" aria-valuemax="100"></div>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            <div class="title-chart-section">
                                <div class="row">
                                    <div class="col-md-12">
                                        <h4 class="ml-4 mt-2">
                                            <strong>Comparación de</strong>
                                        </h4>
                                        <p class="ml-4 small">Progreso por mes</p>
                                    </div>
                                </div>
                            </div>
                            <div class="chart-section">
                                <div class="row my-2">
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-2 col-xs-12 my-2">
                                                <h6><strong>Total de puntos</strong></h6>
                                            </div>
                                            <div class="col-md-10 col-xs-12">
                                                <h3 class="text-primary">{{ overall|floatformat:"0" }}</h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 col-xs-12 my-3">
                                        <!-- TODO: grafico dinamico -->
                                        <canvas id="myChart" width="100%"                                         height="80"></canvas>
                                    </div>
                                    <div class="col-md-6 col-xs-12">
                                        <div class="text-center">
                                            <img src="{% static 'images/'|add:nivel.image %}" alt="Imagen 1"
                                            width="120" height="auto"
                                            class="nivel-img">
                                            <h6><strong>{{ nivel }}</strong></h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.min.js"></script>
    <script>
        var ctx = document.getElementById('myChart');
        var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                datasets: [{
                    label: 'Overall vs Meses',
                    data: [30, 45, 55],
                    backgroundColor : 'rgba(23,162,184,.2)',
                    borderColor : '#17a2b8',
                    pointBackgroundColor : '#17a2b8',
                    pointBorderColor : '#17a2b8',
                    fill: true
                }],
                labels: [1, 2, 3, 4],
            },
            options: {
                scales:{
                    yAxes: [{
                        scaleLabel:{
                            display: true,
                            labelString: 'Overall'
                        }
                    }],
                    xAxes: [{
                        scaleLabel:{
                            display: true,
                            labelString: 'Meses'
                        }
                    }]
                },
                responsive: true
            }
        });
        </script>
</body>
</html>
